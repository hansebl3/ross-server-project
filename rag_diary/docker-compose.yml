version: '3.8'

services:
  rag-diary:
    build: .
    container_name: rag-diary-app
    network_mode: "host" # Use host network to access localhost DB and Ollama easily
    environment:
      - MARIADB_HOST=${MARIADB_HOST}
      - MARIADB_USER=${MARIADB_USER}
      - MARIADB_PASSWORD=${MARIADB_PASSWORD}
      - MARIADB_DB=${MARIADB_DB}
      - LLM_BASE_URL=${LLM_BASE_URL}
      - CHROMA_HOST=127.0.0.1
      - CHROMA_PORT=8001
      - TZ=Asia/Seoul
    volumes:
      - .:/app
    restart: unless-stopped
